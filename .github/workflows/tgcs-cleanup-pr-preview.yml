# IMPORTANT:
# This workflow should never be called on the develop branch.
# However, GitHub requires that we retain a skeleton in place because it determines the UI access based on the primary branch.

name: TGCS - Cleanup PR Preview

on:
  # Automatic undeploy on pull-request close
  # Or, optional ability to re-run for specified PR in case of failed cleanup
  pull_request:
    types: [ closed ]
    branches: [ tgcs-main, tgcs-release ]
  workflow_dispatch:
    input:
      pull_request_number:
        description: "Pull request number to cleanup for"
        required: true

jobs:
  wrong-workflow-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Block execution on non-tgcs branches
        run: |
          # Issue special GitHub error message that appears as an Annotation on the failed workflow.
          echo "::error::‚ùå WRONG BRANCH SELECTED. Only run TGCS workflows from TGCS branches (tgcs-main, tgcs-release, or feature branches)."
          exit 1
