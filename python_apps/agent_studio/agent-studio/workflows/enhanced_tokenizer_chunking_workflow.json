{
  "name": "Enhanced Tokenizer Chunking Workflow",
  "description": "Demonstrates enhanced text chunking capabilities with intelligent strategy selection",
  "version": "1.0.0",
  "configuration": {
    "workflow_id": "enhanced_tokenizer_chunking",
    "workflow_name": "Enhanced Tokenizer Chunking Workflow",
    "workflow_type": "deterministic",
    "execution_pattern": "sequential",
    "timeout_seconds": 600,
    "max_retries": 2,
    "category": "tokenizer_enhanced",
    "tags": ["tokenizer", "chunking", "enhanced", "semantic", "mdstructure"],
    "steps": [
      {
        "step_id": "read_document",
        "step_name": "Read Document with Advanced Parsing",
        "step_type": "data_input",
        "step_order": 1,
        "dependencies": [],
        "config": {
          "tokenizer_step": "file_reader",
          "execution_mode": "advanced",
          "file_path": "/path/to/document.md",
          "supported_formats": [".txt", ".md", ".pdf", ".docx"],
          "max_file_size": 10485760,
          "encoding": "utf-8",
          "extract_metadata": true,
          "advanced_parsing": {
            "default_mode": "auto_parser",
            "use_markitdown": true,
            "auto_detect_format": true,
            "parsers": {
              "md": {
                "default_tool": "markitdown",
                "available_tools": ["markitdown"]
              },
              "pdf": {
                "default_tool": "docling",
                "available_tools": ["docling", "markitdown", "pdfplumber"]
              }
            }
          }
        },
        "timeout_seconds": 120,
        "max_retries": 2
      },
      {
        "step_id": "chunk_with_auto_selection",
        "step_name": "Chunk Text with Auto Strategy Selection",
        "step_type": "transformation",
        "step_order": 2,
        "dependencies": ["read_document"],
        "input_mapping": {
          "content": "read_document.content",
          "metadata": "read_document.metadata"
        },
        "config": {
          "tokenizer_step": "text_chunking",
          "execution_mode": "advanced",
          "advanced_chunking": {
            "default_strategy": "auto",
            "auto_select_strategy": true,
            "strategies": {
              "semantic_chunking": {
                "breakpoint_threshold_type": "percentile",
                "breakpoint_threshold_amount": 85,
                "max_chunk_size": 1500,
                "min_chunk_size": 100
              },
              "mdstructure": {
                "chunk_size": 1200,
                "min_chunk_size": 100,
                "max_chunk_size": 2000,
                "respect_headers": true,
                "include_headers": true
              },
              "sentence_chunking": {
                "max_sentences_per_chunk": 8,
                "min_sentences_per_chunk": 2,
                "max_chunk_size": 1800,
                "min_chunk_size": 150,
                "overlap_sentences": 1
              }
            }
          }
        },
        "timeout_seconds": 180,
        "max_retries": 2
      },
      {
        "step_id": "chunk_semantic_explicit",
        "step_name": "Chunk Text with Explicit Semantic Strategy",
        "step_type": "transformation",
        "step_order": 3,
        "dependencies": ["read_document"],
        "input_mapping": {
          "content": "read_document.content"
        },
        "config": {
          "tokenizer_step": "text_chunking",
          "execution_mode": "advanced",
          "advanced_chunking": {
            "default_strategy": "semantic",
            "strategies": {
              "semantic_chunking": {
                "breakpoint_threshold_type": "percentile",
                "breakpoint_threshold_amount": 90,
                "max_chunk_size": 1000,
                "min_chunk_size": 200
              }
            }
          }
        },
        "timeout_seconds": 240,
        "max_retries": 2
      },
      {
        "step_id": "chunk_mdstructure_explicit",
        "step_name": "Chunk Text with Explicit MDStructure Strategy",
        "step_type": "transformation",
        "step_order": 4,
        "dependencies": ["read_document"],
        "input_mapping": {
          "content": "read_document.content"
        },
        "config": {
          "tokenizer_step": "text_chunking",
          "execution_mode": "advanced",
          "advanced_chunking": {
            "default_strategy": "mdstructure",
            "strategies": {
              "mdstructure": {
                "chunk_size": 800,
                "min_chunk_size": 100,
                "max_chunk_size": 1500,
                "respect_headers": true,
                "include_headers": true
              }
            }
          }
        },
        "timeout_seconds": 120,
        "max_retries": 2
      },
      {
        "step_id": "chunk_sentence_explicit",
        "step_name": "Chunk Text with Explicit Sentence Strategy",
        "step_type": "transformation",
        "step_order": 5,
        "dependencies": ["read_document"],
        "input_mapping": {
          "content": "read_document.content"
        },
        "config": {
          "tokenizer_step": "text_chunking",
          "execution_mode": "advanced",
          "advanced_chunking": {
            "default_strategy": "sentence",
            "strategies": {
              "sentence_chunking": {
                "max_sentences_per_chunk": 6,
                "min_sentences_per_chunk": 2,
                "max_chunk_size": 1200,
                "min_chunk_size": 100,
                "overlap_sentences": 0
              }
            }
          }
        },
        "timeout_seconds": 120,
        "max_retries": 2
      },
      {
        "step_id": "chunk_backward_compatible",
        "step_name": "Chunk Text with Backward Compatible Mode",
        "step_type": "transformation",
        "step_order": 6,
        "dependencies": ["read_document"],
        "input_mapping": {
          "content": "read_document.content"
        },
        "config": {
          "tokenizer_step": "text_chunking",
          "chunk_strategy": "sliding_window",
          "chunk_size": 800,
          "overlap": 0.15,
          "min_chunk_size": 100,
          "max_chunk_size": 1200,
          "preserve_structure": true
        },
        "timeout_seconds": 60,
        "max_retries": 2
      }
    ]
  },
  "tags": ["example", "enhanced", "chunking"],
  "metadata": {
    "description": "This workflow demonstrates the enhanced text chunking capabilities including:\n\n1. **Auto Strategy Selection**: Automatically selects the best chunking strategy based on content characteristics\n2. **Semantic Chunking**: Groups text based on semantic similarity using sentence embeddings\n3. **MDStructure Chunking**: Respects markdown structure and hierarchy\n4. **Sentence Chunking**: Intelligent sentence boundary detection with spaCy support\n5. **Backward Compatibility**: Maintains compatibility with existing simple mode configurations\n\nThe workflow processes a document through multiple chunking strategies to demonstrate the different approaches and their outputs.",
    "use_cases": [
      "Document processing pipelines",
      "RAG system preparation",
      "Content analysis workflows",
      "Multi-strategy chunking comparison",
      "Advanced text preprocessing"
    ],
    "requirements": [
      "Enhanced FileReaderStep for document reading",
      "Enhanced TextChunkingStep for advanced chunking",
      "Optional: sentence-transformers for semantic chunking",
      "Optional: spaCy for enhanced sentence detection"
    ],
    "configuration_examples": {
      "auto_selection": {
        "execution_mode": "advanced",
        "advanced_chunking": {
          "default_strategy": "auto",
          "auto_select_strategy": true
        }
      },
      "semantic_chunking": {
        "execution_mode": "advanced",
        "advanced_chunking": {
          "default_strategy": "semantic",
          "strategies": {
            "semantic_chunking": {
              "breakpoint_threshold_type": "percentile",
              "breakpoint_threshold_amount": 85
            }
          }
        }
      },
      "mdstructure_chunking": {
        "execution_mode": "advanced",
        "advanced_chunking": {
          "default_strategy": "mdstructure",
          "strategies": {
            "mdstructure": {
              "respect_headers": true,
              "include_headers": true
            }
          }
        }
      },
      "backward_compatible": {
        "chunk_strategy": "sliding_window",
        "chunk_size": 800,
        "overlap": 0.15
      }
    }
  }
}
