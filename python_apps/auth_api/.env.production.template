# Production Environment Variables Template
# Copy this file to .env.production and fill in the values
# DO NOT commit .env.production to git!

# ============================================================================
# Database Configuration (External PostgreSQL)
# ============================================================================
# Point to your shared PostgreSQL instance
# Format: postgresql://username:password@host:port/database
SQLALCHEMY_DATABASE_URL=postgresql://auth_user:CHANGE_ME_PASSWORD@your-postgres-host:5432/auth_db

# ============================================================================
# Security - CRITICAL: Change these in production!
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_KEY
API_KEY_SECRET=CHANGE_ME_GENERATE_RANDOM_KEY

# Token expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=90
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# API Key algorithm (HS256 or RS256)
API_KEY_ALGORITHM=HS256

# ============================================================================
# Email Configuration (for MFA, password reset)
# ============================================================================
# IMPORTANT: DO NOT use MailHog in production!
# Use a real SMTP server like Gmail, SendGrid, AWS SES, etc.
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_TLS=True
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
EMAILS_FROM_EMAIL=noreply@yourcompany.com
EMAILS_FROM_NAME="Your Company Name"

# ============================================================================
# Application URLs
# ============================================================================
FRONTEND_URL=https://yourapp.com
AUTH_API_PORT=8004

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=https://yourapp.com,https://admin.yourapp.com

# ============================================================================
# Multitenancy
# ============================================================================
MULTITENANCY_ENABLED=true
DEFAULT_TENANT=default

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=INFO

# ============================================================================
# OPA Configuration (usually don't need to change these)
# ============================================================================
# OPA_URL is set in docker-compose.prod.yaml to http://opa:8181/v1/data/rbac/allow
# OPA_ENABLED is set to true in docker-compose.prod.yaml
# OPA_TIMEOUT is set to 5.0 in docker-compose.prod.yaml

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# MFA Configuration
# ============================================================================
MFA_DEVICE_BYPASS_HOURS=24
EMAIL_MFA_GRACE_PERIOD_DAYS=30
# Grace period auto-enable - Options: "email", "sms", "totp", "none"
MFA_AUTO_ENABLE_METHOD=email

# ============================================================================
# AWS Configuration for SMS MFA
# ============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_SECRET_KEY
SMS_SENDER_ID=""

# ============================================================================
# Branding Configuration
# ============================================================================
# Primary color for email templates
# Default: e75f33 (ElevAIte orange). Change to e61e1e for Toshiba deployments
MFA_EMAIL_PRIMARY_COLOR=e75f33

# Branding name used throughout the application
BRANDING_NAME="Your Company Name"
BRANDING_ORG="Your Organization"
BRANDING_SUPPORT_EMAIL=support@yourcompany.com

# ============================================================================
# Trusted Hosts
# ============================================================================
ALLOWED_HOSTS=yourapp.com,www.yourapp.com

# ============================================================================
# Redis Configuration (optional)
# ============================================================================
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_DEBOUNCE_SECONDS=60
