services:
  etl:
    build:
      context: ./elevaite_backend
      dockerfile: ./Dockerfile.etl
    environment:
      SQLALCHEMY_DATABASE_URL: ${ETL_DATABASE_URL}
      QDRANT_URL: ${QDRANT_URL}
      QDRANT_API_KEY: ${QDRANT_API_KEY}
      QDRANT_COLLECTION: ${QDRANT_COLLECTION}
      SERVICE_NOW_PROJECT: ${SERVICE_NOW_PROJECT}
      SERVICE_NOW_PIPELINE: ${SERVICE_NOW_PIPELINE}
      REDIS_HOST: ${ETL_REDIS_HOST}
      REDIS_PORT: ${ETL_REDIS_PORT}
      REDIS_PASSWORD: ${ETL_REDIS_PASSWORD}
      ELASTIC_HOST: ${ELASTIC_HOST}
      LAKEFS_ACCESS_KEY_ID: ${LAKEFS_ACCESS_KEY_ID}
      LAKEFS_SECRET_ACCESS_KEY: ${LAKEFS_SECRET_ACCESS_KEY}
      LAKEFS_ENDPOINT_URL: ${LAKEFS_ENDPOINT_URL}
      S3_ACCESS_KEY_ID: ${S3_ACCESS_KEY_ID}
      S3_SECRET_ACCESS_KEY: ${S3_SECRET_ACCESS_KEY}
      ELASTIC_PASSWORD: ${ELASTIC_PASSWORD}
      ELASTIC_SSL_FINGERPRINT: ${ELASTIC_SSL_FINGERPRINT}
      RABBITMQ_HOST: ${RABBITMQ_HOST}
      RABBITMQ_USER: ${RABBITMQ_USER}
      RABBITMQ_VHOST: ${RABBITMQ_VHOST}
      RABBITMQ_PASSWORD: ${RABBITMQ_PASSWORD}
  rbac:
    build:
      context: ./elevaite_backend
      dockerfile: ./Dockerfile.rbac
    environment:
      SQLALCHEMY_DATABASE_URL: ${RBAC_DATABASE_URL}
      FUSIONAUTH_URL: ${FUSIONAUTH_URL}
      FUSIONAUTH_APPLICATION_ID: ${FUSIONAUTH_APPLICATION_ID}
      FUSIONAUTH_API_KEY: ${FUSIONAUTH_API_KEY}
      FUSIONAUTH_TENTANT_ID: ${FUSIONAUTH_TENTANT_ID}
      ORGANIZATION_ID: ${ORGANIZATION_ID}
      SUPERADMIN_EMAIL_1: ${SUPERADMIN_EMAIL_1}
      SUPERADMIN_EMAIL_2: ${SUPERADMIN_EMAIL_2}
      ROOT_SUPERADMIN_ID: ${ROOT_SUPERADMIN_ID}
      DEFAULT_ACCOUNT_ID: ${DEFAULT_ACCOUNT_ID}
      DEFAULT_PROJECT_ID: ${DEFAULT_PROJECT_ID}
      REDIS_HOST: ${RBAC_REDIS_HOST}
      REDIS_PORT: ${RBAC_REDIS_PORT}
      REDIS_PASSWORD: ${RBAC_REDIS_PASSWORD}
      REDIS_USERNAME: ${RBAC_REDIS_USERNAME}
  workers:
    build:
      context: ./elevaite_backend
      dockerfile: ./Dockerfile.workers
    environment:
      SQLALCHEMY_DATABASE_URL: ${ETL_DATABASE_URL}
      QDRANT_URL: ${QDRANT_URL}
      QDRANT_API_KEY: ${QDRANT_API_KEY}
      QDRANT_COLLECTION: ${QDRANT_COLLECTION}
      SERVICE_NOW_PROJECT: ${SERVICE_NOW_PROJECT}
      SERVICE_NOW_PIPELINE: ${SERVICE_NOW_PIPELINE}
      REDIS_HOST: ${REDIS_HOST}
      REDIS_PORT: ${REDIS_PORT}
      REDIS_PASSWORD: ${REDIS_PASSWORD}
      ELASTIC_HOST: ${ELASTIC_HOST}
      LAKEFS_ACCESS_KEY_ID: ${LAKEFS_ACCESS_KEY_ID}
      LAKEFS_SECRET_ACCESS_KEY: ${LAKEFS_SECRET_ACCESS_KEY}
      LAKEFS_ENDPOINT_URL: ${LAKEFS_ENDPOINT_URL}
      LAKEFS_STORAGE_NAMESPACE: ${LAKEFS_STORAGE_NAMESPACE}
      S3_ACCESS_KEY_ID: ${S3_ACCESS_KEY_ID}
      S3_SECRET_ACCESS_KEY: ${S3_SECRET_ACCESS_KEY}
      ELASTIC_PASSWORD: ${ELASTIC_PASSWORD}
      ELASTIC_SSL_FINGERPRINT: ${ELASTIC_SSL_FINGERPRINT}
      RABBITMQ_HOST: ${RABBITMQ_HOST}
      RABBITMQ_USER: ${RABBITMQ_USER}
      RABBITMQ_VHOST: ${RABBITMQ_VHOST}
      RABBITMQ_PASSWORD: ${RABBITMQ_PASSWORD}
      OPENAI_API_KEY: ${OPENAI_API_KEY}
